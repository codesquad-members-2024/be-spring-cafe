<!DOCTYPE html>
<html lang="kr">
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <title>SPACE NYANCAT CAFE üêà</title>
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/Dalgona/neodgm-webfont@1.510/neodgm_code/style.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href="/css/reset.css" rel="stylesheet">
    <link href="/css/post/show.css" rel="stylesheet">
    <script src="/js/global.js"></script>
</head>
<body>
<div class="background">
    <div th:replace="~{base/part/navbar :: navbar}"></div>

    <div class="container" id="main">
        <div class="col-md-12 col-sm-12 col-lg-12">
            <div style="width:100%" class="panel panel-default">
                <header class="post-header">
                    <p class="post-title" th:text="${question.getTitle()}"></p>
                </header>
                <div class="content-main">
                    <article class="article">
                        <div class="article-header">
                            <div class="article-header-text">
                                <p th:if="${question.isUserWithdrawn()}" class="article-content" th:text = "${question.getUserName()}"></p>
                                <a th:unless="${question.isUserWithdrawn()}" th:href = "@{'/profile/' + ${question.getUserLoginId}}" class="article-content" th:text = "${question.getUserName() + ' ‚Ä¢ ' + question.getUserLoginId()}"></a>
                                <p class="article-content">
                                    <span th:if="${question.isModified()}" th:text="${question.getCreatedAt()} + ' (ÏàòÏ†ïÎê®)'"></span>
                                    <span th:unless="${question.isModified()}" th:text="${question.getCreatedAt()}"></span>
                                </p>
                                <p class="article-content">Ï°∞Ìöå <span th:text = "${question.getViewCnt()}">0</span></p>
                                <a th:if="${question.isMy()}" class="article-content" th:href="'/question/edit/' + ${question.getQuestionId()}">ÏàòÏ†ï</a>
                                <a th:if="${question.isMy()}" class="article-content" th:href="'/question/delete/' + ${question.getQuestionId()}">ÏÇ≠Ï†ú</a>
                            </div>
                        </div>
                        <div>
                            <p class="article-doc" th:text="${question.getContent()}"></p>
                        </div>
                    </article>

                    <div class="post-comment">
                        <div class="post-comment-slipp">
                            <p class="post-comment-count">ÎåìÍ∏Ä <span th:text="${totalCommentCnt}">0</span>Í∞ú</p>
                            <div class="post-comment-slipp-articles">
                                <div th:each="comment : ${comments}">
                                    <article class="comment">
                                        <div class="article-text">
                                            <!-- ÏûëÏÑ±Ïûê Ï†ïÎ≥¥ ÌëúÏãú -->
                                            <a th:unless="${comment.isUserWithdrawn}" th:href="'/profile/' + ${comment.userLoginId}" class="comment-content comment-author-name">
                                                <span th:text="${comment.getUserName} + ' ‚Ä¢ ' + ${comment.userLoginId}"></span>
                                            </a>
                                            <a th:if="${comment.isUserWithdrawn}" class="comment-content comment-author-name">
                                                <span th:text="${comment.userName}"></span>
                                            </a>
                                            <!-- ÎåìÍ∏Ä ÎÇ¥Ïö© ÌëúÏãú -->
                                            <div class="comment-content">
                                                <p th:text="${comment.content}"></p>
                                            </div>
                                            <!-- ÎåìÍ∏Ä ÏûëÏÑ± ÏãúÍ∞Ñ ÌëúÏãú -->
                                            <div class="comment-content comment-doc">
                                                <p class="comment-content comment-time">
                                                    <span th:if="${comment.modified}" th:text="${comment.modifiedAt} + ' (ÏàòÏ†ïÎê®)'"></span>
                                                    <span th:unless="${comment.modified}" th:text="${comment.modifiedAt}"></span>
                                                </p>
                                                <!-- ÎåìÍ∏Ä ÏàòÏ†ï Î∞è ÏÇ≠Ï†ú Î≤ÑÌäº ÌëúÏãú -->
<!--                                                <a th:if="${comment.isMy}" class="comment-content comment-menu" th:href="'/comment/edit/' + ${comment.commentId}">ÏàòÏ†ï</a>-->
                                                <a th:if="${comment.isMy}" class="comment-content comment-menu" href="#" th:onclick="'submitDeleteForm(' + ${comment.commentId} + '); return false;'" role="button">ÏÇ≠Ï†ú</a>
                                                <form th:id="'delete-comment-' + ${comment.commentId}" style="display: none" method="post" th:action="'/comments/' + ${comment.commentId}">
                                                    <input type="hidden" name="_method" value="DELETE" />
                                                    <input type="hidden" name="questionId" th:value="${question.questionId}" />
                                                    <button type="submit" style="display: none">ÏÇ≠Ï†ú</button>
                                                </form>

                                                <script>
                                                    function submitDeleteForm(commentId) {
                                                        document.getElementById('delete-comment-' + commentId).submit();
                                                    }
                                                </script>
                                            </div>
                                        </div>
                                    </article>
                                </div>

                                <form th:unless="${question.isUserWithdrawn()}" class="submit-write" method="post" action="/comment">
                                    <div class="comment-writer-container">
                                        <label for="questionId">
                                            <input type="hidden" id="questionId" name="questionId" th:value="${question.getQuestionId()}">
                                            <p class="comment-writer" th:text="${session.userCredentials.username}">
                                        </label>
                                    </div>
                                    <div class="form-group">
                                        <label for="content">
                                            <textarea class="form-control" id="content" name="content"
                                                      placeholder="ÎÇ¥Ïö©ÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî" required></textarea>
                                        </label>
                                    </div>
                                    <input class="post-write-btn" type="submit" value="Îì±Î°ù"/>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
</body>
</html>
